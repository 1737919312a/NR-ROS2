; PlatformIO Project Configuration File
; ROS 2 Cloud-Edge-End Collaborative Robot System
; ESP32-S3 MCU Firmware

[env:host_mcu]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
build_speed = 921600

; MCU配置
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio
board_build.partitions = huge_app.csv

; 编译选项
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -O2

; Micro-ROS库
lib_deps = 
    https://github.com/micro-ROS/micro_ros_arduino.git

; 串口映射（USB CDC）
build_src_filter = +<*> -<slave_mcu*>

[env:slave_mcu]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
build_speed = 921600

board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio
board_build.partitions = huge_app.csv

build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DSLAVE_MCU_BUILD
    -O2

lib_deps = 
    https://github.com/micro-ROS/micro_ros_arduino.git

build_src_filter = +<*> -<host_mcu*>
